(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[634],{2712:(e,t,a)=>{"use strict";async function s(e,t){let a="Error desconocido",s=null;try{let t=e.headers.get("content-type");a=t&&t.includes("application/json")?(null==(s=await e.json())?void 0:s.error)||a:await e.text()||"HTTP ".concat(e.status,": ").concat(e.statusText)}catch(t){a="Error al procesar respuesta: ".concat(e.status," ").concat(e.statusText)}console.error("=== API ERROR ===",{route:t.route,operation:t.operation,status:e.status,statusText:e.statusText,errorDetails:s,timestamp:new Date().toISOString()});let r=a;if(s){var o,l,n;((null==(o=s.details)?void 0:o.includes("Database"))||(null==(l=s.details)?void 0:l.includes("D1"))||(null==(n=s.details)?void 0:n.includes("binding")))&&(r="Error de base de datos: "+a,"cloudflare"===s.environment&&(r+="\n\nVerifica la configuraci\xf3n de D1 en Cloudflare Pages.")),s.details&&s.details!==a&&(console.error("Error details:",s.details),"localhost"===window.location.hostname&&(r+="\n\nDetalles: ".concat(s.details))),s.debug&&console.error("Debug info:",s.debug)}return r}async function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0;try{let r=await fetch(e,t);if(!r.ok){let e=await s(r,a);throw Error(e)}return r}catch(e){if("TypeError"===e.name&&e.message.includes("fetch"))throw console.error("=== NETWORK ERROR ===",{route:a.route,operation:a.operation,error:e.message,timestamp:new Date().toISOString()}),Error("Error de conexi\xf3n. Verifica tu conexi\xf3n a internet o si el servidor est\xe1 disponible.");throw e}}a.d(t,{q:()=>r})},4807:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});var s=a(5155),r=a(2115);function o(e){let{children:t,className:a=""}=e,o=(0,r.useRef)(null);return(0,r.useEffect)(()=>{let e=o.current;if(!e)return;let t=0,a=0,s=null,r=e=>{let r=e.touches[0];t=r.clientX,a=r.clientY,s=null},l=r=>{if(!e||0===r.touches.length)return;let o=r.touches[0],l=o.clientX-t,n=o.clientY-a;if(null===s&&(Math.abs(l)>5||Math.abs(n)>5)&&(s=Math.abs(l)>Math.abs(n)?"horizontal":"vertical"),"horizontal"===s){let t=e.scrollLeft,a=e.scrollWidth,s=e.clientWidth;l<0&&t>0||l>0&&t<a-s-1?r.stopPropagation():(r.preventDefault(),r.stopPropagation())}},n=()=>{s=null};return e.addEventListener("touchstart",r,{passive:!0,capture:!0}),e.addEventListener("touchmove",l,{passive:!1,capture:!0}),e.addEventListener("touchend",n,{passive:!0,capture:!0}),()=>{e.removeEventListener("touchstart",r,{capture:!0}),e.removeEventListener("touchmove",l,{capture:!0}),e.removeEventListener("touchend",n,{capture:!0})}},[]),(0,s.jsx)("div",{ref:o,className:"scroll-horizontal ".concat(a),children:t})}},5538:(e,t,a)=>{Promise.resolve().then(a.bind(a,8251))},7969:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var s=a(5155),r=a(6874),o=a.n(r),l=a(5695);function n(){let e=(0,l.useRouter)(),t=async()=>{await fetch("/api/auth/logout",{method:"POST"}),e.push("/login"),e.refresh()};return(0,s.jsx)("nav",{className:"bg-purple-600 text-white shadow-lg sticky top-0 z-50",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-8",children:(0,s.jsxs)("div",{className:"flex justify-between items-center h-14 sm:h-16",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-4 lg:space-x-8 overflow-x-auto",children:[(0,s.jsx)(o(),{href:"/",className:"text-lg sm:text-xl font-bold whitespace-nowrap",children:"Clases Bot"}),(0,s.jsx)(o(),{href:"/usuarios",className:"hover:text-purple-200 transition-colors text-sm sm:text-base whitespace-nowrap",children:"Alumnos"}),(0,s.jsx)(o(),{href:"/clases",className:"hover:text-purple-200 transition-colors text-sm sm:text-base whitespace-nowrap",children:"Clases"}),(0,s.jsx)(o(),{href:"/calendario",className:"hover:text-purple-200 transition-colors text-sm sm:text-base whitespace-nowrap",children:"Calendario"})]}),(0,s.jsx)("button",{onClick:t,className:"hover:text-purple-200 transition-colors text-xs sm:text-sm whitespace-nowrap px-2 sm:px-0",children:"Salir"})]})})})}},8251:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var s=a(5155),r=a(2115),o=a(5695),l=a(7969),n=a(4807),i=a(2712);function c(){let e=(0,o.useSearchParams)(),[t,a]=(0,r.useState)([]),[c,d]=(0,r.useState)([]),[m,u]=(0,r.useState)([]),[x,p]=(0,r.useState)(!1),[h,g]=(0,r.useState)(!1),[b,y]=(0,r.useState)(null),[f,v]=(0,r.useState)(null),[w,j]=(0,r.useState)(""),[N,E]=(0,r.useState)(1),[C]=(0,r.useState)(12),[k,_]=(0,r.useState)("all"),[S,A]=(0,r.useState)({id:0,nombre:"",apellido:"",telefono:"",fecha_alta:new Date().toISOString().split("T")[0]});(0,r.useEffect)(()=>{let t=e.get("filter");("desactivados"===t||"activos"===t||"all"===t)&&_(t)},[e]),(0,r.useEffect)(()=>{(async()=>{await L(),await D();let e=await T();if(Array.isArray(e)&&0===e.length)try{let e=await fetch("/api/test-users",{method:"POST"}),t=await e.json();e.ok?(console.log("Usuarios de prueba generados autom\xe1ticamente:",t.message),await T()):console.error("Error generando usuarios de prueba:",t.error)}catch(e){console.error("Error generando usuarios de prueba:",e)}})()},[]);let T=async()=>{try{let e=await (0,i.q)("/api/usuarios",{},{route:"/api/usuarios",operation:"load_usuarios"}),t=await e.json();if(Array.isArray(t))return a(t),t;return console.warn("loadUsuarios: Response is not an array",t),a([]),[]}catch(e){return console.error("Error loading usuarios:",e),alert(e.message||"Error al cargar usuarios"),a([]),[]}},L=async()=>{try{let e=await (0,i.q)("/api/clases",{},{route:"/api/clases",operation:"load_clases"}),t=await e.json();Array.isArray(t)?d(t):(console.warn("loadClases: Response is not an array",t),d([]))}catch(e){console.error("Error loading clases:",e),alert(e.message||"Error al cargar clases"),d([])}},D=async()=>{try{let e=await fetch("/api/reservas");if(!e.ok){console.warn("Error loading reservas:",e.status,e.statusText),u([]);return}let t=await e.json();Array.isArray(t)?u(t):(console.warn("loadReservas: Response is not an array",t),u([]))}catch(e){console.error("Error loading reservas:",e),u([])}},O=async e=>{e.preventDefault();let t=f?{...S,activo:!0}:{nombre:S.nombre,apellido:S.apellido,telefono:S.telefono,fecha_alta:S.fecha_alta,activo:!0};try{await (0,i.q)("/api/usuarios",{method:f?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},{route:"/api/usuarios",operation:f?"update_usuario":"create_usuario"}),p(!1),v(null),A({id:0,nombre:"",apellido:"",telefono:"",fecha_alta:new Date().toISOString().split("T")[0]}),T()}catch(e){alert(e.message||"Error al guardar")}},R=async e=>{let t=!e.activo,a=t?"activar":"desactivar";if(confirm("\xbfEst\xe1s seguro de ".concat(a," a ").concat(e.nombre," ").concat(e.apellido,"?").concat(t?"":"\n\nSe eliminar\xe1n todas las clases asignadas a este alumno.")))try{if(!t){for(let t of m.filter(t=>t.usuario_id===e.id))try{await fetch("/api/reservas?usuario_id=".concat(e.id,"&clase_id=").concat(t.clase_id),{method:"DELETE"})}catch(e){console.error("Error eliminando reserva ".concat(t.clase_id,":"),e)}await D()}await (0,i.q)("/api/usuarios",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.id,nombre:e.nombre,apellido:e.apellido,telefono:e.telefono,fecha_alta:e.fecha_alta,activo:t})},{route:"/api/usuarios",operation:"toggle_activo"}),T(),D()}catch(e){alert(e.message||"Error al ".concat(a," alumno"))}},M=async e=>{if(confirm("\xbfEst\xe1s seguro de eliminar este alumno?"))try{await (0,i.q)("/api/usuarios?id=".concat(e),{method:"DELETE"},{route:"/api/usuarios",operation:"delete_usuario"}),T(),D()}catch(e){alert(e.message||"Error al eliminar")}},P=async e=>{if(!b)return;let t=m.find(t=>t.usuario_id===b.id&&t.clase_id===e);try{if(t)await (0,i.q)("/api/reservas?usuario_id=".concat(b.id,"&clase_id=").concat(e),{method:"DELETE"},{route:"/api/reservas",operation:"delete_reserva"}),D();else try{let t=await fetch("/api/reservas",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({usuario_id:b.id,clase_id:e})}),a=await t.json();if(!t.ok)return void("CUPO_COMPLETO"===a.code?alert("⚠️ Cupo Completo\n\n".concat(a.error,"\n\nCupo m\xe1ximo: ").concat(a.cupoMaximo," alumnos\nAlumnos inscritos: ").concat(a.cupoActual)):"ALREADY_ENROLLED"===a.code?alert("ℹ️ ".concat(a.error)):alert(a.error||"Error al inscribir alumno"));D()}catch(e){console.error("Error inesperado al inscribir:",e),alert(e.message||"Error al inscribir alumno")}}catch(e){alert(e.message||"Error al modificar reserva")}},q=e=>({Lun:"Lunes",Mar:"Martes",Jue:"Jueves",Sab:"S\xe1bado"})[e]||e,I=e=>m.filter(t=>t.usuario_id===e).map(e=>{let t=c.find(t=>t.id===e.clase_id);return t?"".concat(q(t.dia)," ").concat(t.hora):""}).filter(Boolean).join(", ")||"Ninguna",z=t.filter(e=>{if("activos"===k&&!e.activo||"desactivados"===k&&e.activo)return!1;if(!w)return!0;let t=w.toLowerCase();return e.nombre.toLowerCase().includes(t)||e.apellido.toLowerCase().includes(t)||(e.telefono||"").toLowerCase().includes(t)||I(e.id).toLowerCase().includes(t)}),J=Math.ceil(z.length/C),U=(N-1)*C,B=U+C,W=z.slice(U,B);return(0,r.useEffect)(()=>{E(1)},[w,k]),(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50 overflow-x-hidden",children:[(0,s.jsx)(l.A,{}),(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-8 py-4 sm:py-6 lg:py-8",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-0 mb-4 sm:mb-6",children:[(0,s.jsx)("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-900",children:"Alumnos"}),(0,s.jsx)("div",{className:"flex gap-2 w-full sm:w-auto",children:(0,s.jsx)("button",{onClick:()=>{p(!0),v(null),A({id:0,nombre:"",apellido:"",telefono:"",fecha_alta:new Date().toISOString().split("T")[0]})},className:"bg-purple-600 text-white px-3 sm:px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors text-sm sm:text-base w-full sm:w-auto",children:"+ Nuevo Alumno"})})]}),(0,s.jsxs)("div",{className:"mb-6 space-y-3",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:"text",placeholder:"Buscar por nombre, apellido, tel\xe9fono o clases...",value:w,onChange:e=>j(e.target.value),className:"w-full px-4 py-2 pl-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-gray-900 placeholder:text-gray-500"}),(0,s.jsx)("svg",{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),w&&(0,s.jsx)("button",{onClick:()=>j(""),className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600",children:"✕"})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,s.jsx)("button",{onClick:()=>_("all"),className:"px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ".concat("all"===k?"bg-purple-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"Todos"}),(0,s.jsx)("button",{onClick:()=>_("activos"),className:"px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ".concat("activos"===k?"bg-green-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"Activos"}),(0,s.jsx)("button",{onClick:()=>_("desactivados"),className:"px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ".concat("desactivados"===k?"bg-red-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"Desactivados"})]}),(w||"all"!==k)&&(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:["Mostrando ",z.length," de ",t.length," alumnos"]})]}),x&&(0,s.jsxs)("div",{className:"bg-white p-4 sm:p-6 rounded-lg shadow-md mb-4 sm:mb-6",children:[(0,s.jsx)("h2",{className:"text-xl sm:text-2xl font-semibold mb-4 text-gray-900",children:f?"Editar Alumno":"Nuevo Alumno"}),(0,s.jsxs)("form",{onSubmit:O,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre *"}),(0,s.jsx)("input",{type:"text",value:S.nombre,onChange:e=>A({...S,nombre:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-gray-900 placeholder:text-gray-500",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Apellido *"}),(0,s.jsx)("input",{type:"text",value:S.apellido,onChange:e=>A({...S,apellido:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-gray-900 placeholder:text-gray-500",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tel\xe9fono *"}),(0,s.jsx)("input",{type:"tel",value:S.telefono,onChange:e=>A({...S,telefono:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-gray-900 placeholder:text-gray-500",required:!0,placeholder:"Ej: +54 11 1234-5678"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de Alta"}),(0,s.jsx)("input",{type:"date",value:S.fecha_alta,onChange:e=>A({...S,fecha_alta:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-gray-900 placeholder:text-gray-500",required:!0})]})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2",children:[(0,s.jsx)("button",{type:"submit",className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 text-sm sm:text-base w-full sm:w-auto",children:"Guardar"}),(0,s.jsx)("button",{type:"button",onClick:()=>{p(!1),v(null)},className:"bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 text-sm sm:text-base w-full sm:w-auto",children:"Cancelar"})]})]})]}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:(0,s.jsx)(n.A,{className:"mx-0",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-4 sm:px-6 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Nombre"}),(0,s.jsx)("th",{className:"px-4 sm:px-6 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Apellido"}),(0,s.jsx)("th",{className:"px-4 sm:px-6 py-2 text-left text-xs font-medium text-gray-500 uppercase hidden md:table-cell",children:"Tel\xe9fono"}),(0,s.jsx)("th",{className:"px-4 sm:px-6 py-2 text-left text-xs font-medium text-gray-500 uppercase hidden lg:table-cell",children:"Clases Inscritas"}),(0,s.jsx)("th",{className:"px-4 sm:px-6 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Estado"}),(0,s.jsx)("th",{className:"px-4 sm:px-6 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Acciones"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:W.map(e=>{let t=I(e.id);return(0,s.jsxs)("tr",{className:e.activo?"":"opacity-60",children:[(0,s.jsx)("td",{className:"px-4 sm:px-6 py-2 whitespace-nowrap text-sm text-gray-900",children:e.nombre}),(0,s.jsx)("td",{className:"px-4 sm:px-6 py-2 whitespace-nowrap text-sm text-gray-900",children:e.apellido}),(0,s.jsx)("td",{className:"px-4 sm:px-6 py-2 whitespace-nowrap text-sm text-gray-900 hidden md:table-cell",children:e.telefono||"-"}),(0,s.jsx)("td",{className:"px-4 sm:px-6 py-2 text-sm text-gray-900 hidden lg:table-cell",children:(0,s.jsx)("div",{className:"max-w-xs truncate",title:t,children:t})}),(0,s.jsx)("td",{className:"px-4 sm:px-6 py-2 whitespace-nowrap text-sm",children:(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(e.activo?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.activo?"Activo":"Desactivado"})}),(0,s.jsx)("td",{className:"px-4 sm:px-6 py-2 whitespace-nowrap text-sm font-medium",children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-0",children:[(0,s.jsx)("button",{onClick:()=>{y(e),g(!0)},disabled:!e.activo,className:"px-3 py-2 sm:px-0 sm:py-0 rounded-md sm:rounded-none text-sm font-medium transition-colors sm:mr-3 ".concat(e.activo?"bg-blue-50 sm:bg-transparent text-blue-600 hover:text-blue-900 hover:bg-blue-100 sm:hover:bg-transparent":"bg-gray-100 sm:bg-transparent text-gray-400 cursor-not-allowed opacity-50"),title:e.activo?"Ver y gestionar reservas de clases":"No disponible para alumnos desactivados",children:"Reservas"}),(0,s.jsx)("button",{onClick:()=>{v(e),A({id:e.id,nombre:e.nombre,apellido:e.apellido,telefono:e.telefono,fecha_alta:e.fecha_alta}),p(!0)},disabled:!e.activo,className:"px-3 py-2 sm:px-0 sm:py-0 rounded-md sm:rounded-none text-sm font-medium transition-colors sm:mr-3 ".concat(e.activo?"bg-purple-50 sm:bg-transparent text-purple-600 hover:text-purple-900 hover:bg-purple-100 sm:hover:bg-transparent":"bg-gray-100 sm:bg-transparent text-gray-400 cursor-not-allowed opacity-50"),title:e.activo?"Editar alumno":"No disponible para alumnos desactivados",children:"Editar"}),(0,s.jsx)("button",{onClick:()=>M(e.id),disabled:!e.activo,className:"px-3 py-2 sm:px-0 sm:py-0 rounded-md sm:rounded-none text-sm font-medium transition-colors sm:mr-3 ".concat(e.activo?"bg-red-50 sm:bg-transparent text-red-600 hover:text-red-900 hover:bg-red-100 sm:hover:bg-transparent":"bg-gray-100 sm:bg-transparent text-gray-400 cursor-not-allowed opacity-50"),title:e.activo?"Eliminar alumno":"No disponible para alumnos desactivados",children:"Eliminar"}),(0,s.jsx)("button",{onClick:()=>R(e),className:"px-3 py-2 sm:px-0 sm:py-0 rounded-md sm:rounded-none text-sm font-medium transition-colors ".concat(e.activo?"bg-orange-50 sm:bg-transparent text-orange-600 hover:text-orange-900 hover:bg-orange-100 sm:hover:bg-transparent":"bg-green-50 sm:bg-transparent text-green-600 hover:text-green-900 hover:bg-green-100 sm:hover:bg-transparent"),title:e.activo?"Desactivar alumno":"Activar alumno",style:{opacity:1},children:e.activo?"Desactivar":"Activar"})]})})]},e.id)})})]})})}),J>1&&(0,s.jsxs)("div",{className:"bg-white px-4 py-3 border-t border-gray-200 flex flex-col sm:flex-row items-center justify-between gap-4",children:[(0,s.jsxs)("div",{className:"text-sm text-gray-700",children:["Mostrando ",U+1," a ",Math.min(B,z.length)," de ",z.length," alumnos"]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{onClick:()=>E(e=>Math.max(1,e-1)),disabled:1===N,className:"px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Anterior"}),(0,s.jsx)("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,J)},(e,t)=>{let a;return a=J<=5||N<=3?t+1:N>=J-2?J-4+t:N-2+t,(0,s.jsx)("button",{onClick:()=>E(a),className:"px-3 py-2 text-sm font-medium rounded-lg ".concat(N===a?"bg-purple-600 text-white":"text-gray-700 bg-white border border-gray-300 hover:bg-gray-50"),children:a},a)})}),(0,s.jsx)("button",{onClick:()=>E(e=>Math.min(J,e+1)),disabled:N===J,className:"px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Siguiente"})]})]}),h&&b&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2 sm:p-4",onClick:()=>{g(!1),y(null)},children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[95vh] flex flex-col",onClick:e=>e.stopPropagation(),children:[(0,s.jsx)("div",{className:"p-4 sm:p-6 flex-shrink-0 border-b border-gray-200",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("h2",{className:"text-lg sm:text-xl lg:text-2xl font-semibold pr-2",children:["Reservas de ",b.nombre," ",b.apellido]}),(0,s.jsx)("button",{onClick:()=>{g(!1),y(null)},className:"text-gray-500 hover:text-gray-700 text-xl sm:text-2xl flex-shrink-0",children:"✕"})]})}),(0,s.jsx)("div",{className:"overflow-y-auto flex-1 p-4 sm:p-6",children:(0,s.jsx)("div",{className:"space-y-2",children:c.map(e=>{let t=m.some(t=>t.usuario_id===b.id&&t.clase_id===e.id);return(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-0 p-3 rounded-lg border-2 ".concat(t?"bg-green-50 border-green-300":"bg-gray-50 border-gray-200"),children:[(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("span",{className:"font-medium",children:q(e.dia)}),(0,s.jsx)("span",{className:"ml-2 text-gray-600",children:e.hora}),(0,s.jsxs)("span",{className:"ml-2 text-sm text-gray-500",children:["- ",e.nombre]})]}),(0,s.jsx)("button",{onClick:()=>P(e.id),className:"px-3 sm:px-4 py-2 rounded-lg text-xs sm:text-sm font-medium whitespace-nowrap ".concat(t?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200"),children:t?"Desinscribir":"Inscribir"})]},e.id)})})}),(0,s.jsx)("div",{className:"p-4 sm:p-6 flex-shrink-0 border-t border-gray-200",children:(0,s.jsx)("button",{onClick:()=>{g(!1),y(null)},className:"w-full bg-purple-600 text-white px-4 py-3 rounded-lg hover:bg-purple-700 transition-colors font-medium text-base",children:"Cerrar"})})]})})]})]})}function d(){return(0,s.jsx)(r.Suspense,{fallback:(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50 overflow-x-hidden",children:[(0,s.jsx)(l.A,{}),(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-8 py-4 sm:py-6 lg:py-8",children:(0,s.jsx)("div",{className:"text-center py-12",children:(0,s.jsx)("p",{className:"text-gray-600",children:"Cargando..."})})})]}),children:(0,s.jsx)(c,{})})}}},e=>{e.O(0,[244,441,964,358],()=>e(e.s=5538)),_N_E=e.O()}]);