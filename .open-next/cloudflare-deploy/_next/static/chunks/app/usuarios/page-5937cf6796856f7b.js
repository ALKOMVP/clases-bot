(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[634],{2712:(e,t,a)=>{"use strict";async function r(e,t){let a="Error desconocido",r=null;try{let t=e.headers.get("content-type");a=t&&t.includes("application/json")?(null==(r=await e.json())?void 0:r.error)||a:await e.text()||"HTTP ".concat(e.status,": ").concat(e.statusText)}catch(t){a="Error al procesar respuesta: ".concat(e.status," ").concat(e.statusText)}console.error("=== API ERROR ===",{route:t.route,operation:t.operation,status:e.status,statusText:e.statusText,errorDetails:r,timestamp:new Date().toISOString()});let s=a;if(r){var o,l,n;((null==(o=r.details)?void 0:o.includes("Database"))||(null==(l=r.details)?void 0:l.includes("D1"))||(null==(n=r.details)?void 0:n.includes("binding")))&&(s="Error de base de datos: "+a,"cloudflare"===r.environment&&(s+="\n\nVerifica la configuraci\xf3n de D1 en Cloudflare Pages.")),r.details&&r.details!==a&&(console.error("Error details:",r.details),"localhost"===window.location.hostname&&(s+="\n\nDetalles: ".concat(r.details))),r.debug&&console.error("Debug info:",r.debug)}return s}async function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0;try{let s=await fetch(e,t);if(!s.ok){let e=await r(s,a);throw Error(e)}return s}catch(e){if("TypeError"===e.name&&e.message.includes("fetch"))throw console.error("=== NETWORK ERROR ===",{route:a.route,operation:a.operation,error:e.message,timestamp:new Date().toISOString()}),Error("Error de conexi\xf3n. Verifica tu conexi\xf3n a internet o si el servidor est\xe1 disponible.");throw e}}a.d(t,{q:()=>s})},4807:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});var r=a(5155),s=a(2115);function o(e){let{children:t,className:a=""}=e,o=(0,s.useRef)(null);return(0,s.useEffect)(()=>{let e=o.current;if(!e)return;let t=0,a=0,r=null,s=e=>{let s=e.touches[0];t=s.clientX,a=s.clientY,r=null},l=s=>{if(!e||0===s.touches.length)return;let o=s.touches[0],l=o.clientX-t,n=o.clientY-a;if(null===r&&(Math.abs(l)>5||Math.abs(n)>5)&&(r=Math.abs(l)>Math.abs(n)?"horizontal":"vertical"),"horizontal"===r){let t=e.scrollLeft,a=e.scrollWidth,r=e.clientWidth;l<0&&t>0||l>0&&t<a-r-1?s.stopPropagation():(s.preventDefault(),s.stopPropagation())}},n=()=>{r=null};return e.addEventListener("touchstart",s,{passive:!0,capture:!0}),e.addEventListener("touchmove",l,{passive:!1,capture:!0}),e.addEventListener("touchend",n,{passive:!0,capture:!0}),()=>{e.removeEventListener("touchstart",s,{capture:!0}),e.removeEventListener("touchmove",l,{capture:!0}),e.removeEventListener("touchend",n,{capture:!0})}},[]),(0,r.jsx)("div",{ref:o,className:"scroll-horizontal ".concat(a),children:t})}},5538:(e,t,a)=>{Promise.resolve().then(a.bind(a,8251))},7969:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var r=a(5155),s=a(6874),o=a.n(s),l=a(5695);function n(){let e=(0,l.useRouter)(),t=async()=>{await fetch("/api/auth/logout",{method:"POST"}),e.push("/login"),e.refresh()};return(0,r.jsx)("nav",{className:"bg-purple-600 text-white shadow-lg sticky top-0 z-50",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between items-center h-14 sm:h-16",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-4 lg:space-x-8 overflow-x-auto",children:[(0,r.jsx)(o(),{href:"/",className:"text-lg sm:text-xl font-bold whitespace-nowrap",children:"Clases Bot"}),(0,r.jsx)(o(),{href:"/usuarios",className:"hover:text-purple-200 transition-colors text-sm sm:text-base whitespace-nowrap",children:"Alumnos"}),(0,r.jsx)(o(),{href:"/clases",className:"hover:text-purple-200 transition-colors text-sm sm:text-base whitespace-nowrap",children:"Clases"}),(0,r.jsx)(o(),{href:"/calendario",className:"hover:text-purple-200 transition-colors text-sm sm:text-base whitespace-nowrap",children:"Calendario"})]}),(0,r.jsx)("button",{onClick:t,className:"hover:text-purple-200 transition-colors text-xs sm:text-sm whitespace-nowrap px-2 sm:px-0",children:"Salir"})]})})})}},8251:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var r=a(5155),s=a(2115),o=a(7969),l=a(4807),n=a(2712);function i(){let[e,t]=(0,s.useState)([]),[a,i]=(0,s.useState)([]),[c,d]=(0,s.useState)([]),[m,u]=(0,s.useState)(!1),[x,p]=(0,s.useState)(!1),[h,g]=(0,s.useState)(null),[b,f]=(0,s.useState)(null),[y,v]=(0,s.useState)(""),[w,j]=(0,s.useState)(1),[N]=(0,s.useState)(12),[E,C]=(0,s.useState)("all"),[k,_]=(0,s.useState)({id:0,nombre:"",apellido:"",telefono:"",fecha_alta:new Date().toISOString().split("T")[0]});(0,s.useEffect)(()=>{(async()=>{await A(),await T();let e=await S();if(Array.isArray(e)&&0===e.length)try{let e=await fetch("/api/test-users",{method:"POST"}),t=await e.json();e.ok?(console.log("Usuarios de prueba generados autom\xe1ticamente:",t.message),await S()):console.error("Error generando usuarios de prueba:",t.error)}catch(e){console.error("Error generando usuarios de prueba:",e)}})()},[]);let S=async()=>{try{let e=await (0,n.q)("/api/usuarios",{},{route:"/api/usuarios",operation:"load_usuarios"}),a=await e.json();if(Array.isArray(a))return t(a),a;return console.warn("loadUsuarios: Response is not an array",a),t([]),[]}catch(e){return console.error("Error loading usuarios:",e),alert(e.message||"Error al cargar usuarios"),t([]),[]}},A=async()=>{try{let e=await (0,n.q)("/api/clases",{},{route:"/api/clases",operation:"load_clases"}),t=await e.json();Array.isArray(t)?i(t):(console.warn("loadClases: Response is not an array",t),i([]))}catch(e){console.error("Error loading clases:",e),alert(e.message||"Error al cargar clases"),i([])}},T=async()=>{try{let e=await fetch("/api/reservas");if(!e.ok){console.warn("Error loading reservas:",e.status,e.statusText),d([]);return}let t=await e.json();Array.isArray(t)?d(t):(console.warn("loadReservas: Response is not an array",t),d([]))}catch(e){console.error("Error loading reservas:",e),d([])}},L=async e=>{e.preventDefault();let t=b?{...k,activo:!0}:{nombre:k.nombre,apellido:k.apellido,telefono:k.telefono,fecha_alta:k.fecha_alta,activo:!0};try{await (0,n.q)("/api/usuarios",{method:b?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},{route:"/api/usuarios",operation:b?"update_usuario":"create_usuario"}),u(!1),f(null),_({id:0,nombre:"",apellido:"",telefono:"",fecha_alta:new Date().toISOString().split("T")[0]}),S()}catch(e){alert(e.message||"Error al guardar")}},D=async e=>{let t=!e.activo,a=t?"activar":"desactivar";if(confirm("\xbfEst\xe1s seguro de ".concat(a," a ").concat(e.nombre," ").concat(e.apellido,"?").concat(t?"":"\n\nSe eliminar\xe1n todas las clases asignadas a este alumno.")))try{if(!t){for(let t of c.filter(t=>t.usuario_id===e.id))try{await fetch("/api/reservas?usuario_id=".concat(e.id,"&clase_id=").concat(t.clase_id),{method:"DELETE"})}catch(e){console.error("Error eliminando reserva ".concat(t.clase_id,":"),e)}await T()}await (0,n.q)("/api/usuarios",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.id,nombre:e.nombre,apellido:e.apellido,telefono:e.telefono,fecha_alta:e.fecha_alta,activo:t})},{route:"/api/usuarios",operation:"toggle_activo"}),S(),T()}catch(e){alert(e.message||"Error al ".concat(a," alumno"))}},O=async e=>{if(confirm("\xbfEst\xe1s seguro de eliminar este alumno?"))try{await (0,n.q)("/api/usuarios?id=".concat(e),{method:"DELETE"},{route:"/api/usuarios",operation:"delete_usuario"}),S(),T()}catch(e){alert(e.message||"Error al eliminar")}},R=async e=>{if(!h)return;let t=c.find(t=>t.usuario_id===h.id&&t.clase_id===e);try{if(t)await (0,n.q)("/api/reservas?usuario_id=".concat(h.id,"&clase_id=").concat(e),{method:"DELETE"},{route:"/api/reservas",operation:"delete_reserva"}),T();else try{let t=await fetch("/api/reservas",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({usuario_id:h.id,clase_id:e})}),a=await t.json();if(!t.ok)return void("CUPO_COMPLETO"===a.code?alert("⚠️ Cupo Completo\n\n".concat(a.error,"\n\nCupo m\xe1ximo: ").concat(a.cupoMaximo," alumnos\nAlumnos inscritos: ").concat(a.cupoActual)):"ALREADY_ENROLLED"===a.code?alert("ℹ️ ".concat(a.error)):alert(a.error||"Error al inscribir alumno"));T()}catch(e){console.error("Error inesperado al inscribir:",e),alert(e.message||"Error al inscribir alumno")}}catch(e){alert(e.message||"Error al modificar reserva")}},M=e=>({Lun:"Lunes",Mar:"Martes",Jue:"Jueves",Sab:"S\xe1bado"})[e]||e,P=e=>c.filter(t=>t.usuario_id===e).map(e=>{let t=a.find(t=>t.id===e.clase_id);return t?"".concat(M(t.dia)," ").concat(t.hora):""}).filter(Boolean).join(", ")||"Ninguna",q=e.filter(e=>{if("activos"===E&&!e.activo||"desactivados"===E&&e.activo)return!1;if(!y)return!0;let t=y.toLowerCase();return e.nombre.toLowerCase().includes(t)||e.apellido.toLowerCase().includes(t)||(e.telefono||"").toLowerCase().includes(t)||P(e.id).toLowerCase().includes(t)}),I=Math.ceil(q.length/N),z=(w-1)*N,U=z+N,J=q.slice(z,U);return(0,s.useEffect)(()=>{j(1)},[y,E]),(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50 overflow-x-hidden",children:[(0,r.jsx)(o.A,{}),(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-8 py-4 sm:py-6 lg:py-8",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-0 mb-4 sm:mb-6",children:[(0,r.jsx)("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-900",children:"Alumnos"}),(0,r.jsxs)("div",{className:"flex gap-2 w-full sm:w-auto",children:[e.filter(e=>!e.activo).length>0&&(0,r.jsx)("button",{onClick:async()=>{if(confirm("\xbfActivar todos los ".concat(e.filter(e=>!e.activo).length," alumnos desactivados?")))try{let e=await fetch("/api/usuarios/activate-all",{method:"POST"}),t=await e.json();e.ok?(alert(t.message||"Usuarios activados correctamente"),S()):alert(t.error||"Error al activar usuarios")}catch(e){alert("Error al activar usuarios: "+e.message)}},className:"bg-green-600 text-white px-3 sm:px-4 py-2 rounded-lg hover:bg-green-700 transition-colors text-sm sm:text-base",children:"Activar Todos"}),(0,r.jsx)("button",{onClick:()=>{u(!0),f(null),_({id:0,nombre:"",apellido:"",telefono:"",fecha_alta:new Date().toISOString().split("T")[0]})},className:"bg-purple-600 text-white px-3 sm:px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors text-sm sm:text-base w-full sm:w-auto",children:"+ Nuevo Alumno"})]})]}),(0,r.jsxs)("div",{className:"mb-6 space-y-3",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:"text",placeholder:"Buscar por nombre, apellido, tel\xe9fono o clases...",value:y,onChange:e=>v(e.target.value),className:"w-full px-4 py-2 pl-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-gray-900 placeholder:text-gray-500"}),(0,r.jsx)("svg",{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),y&&(0,r.jsx)("button",{onClick:()=>v(""),className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600",children:"✕"})]}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,r.jsx)("button",{onClick:()=>C("all"),className:"px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ".concat("all"===E?"bg-purple-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"Todos"}),(0,r.jsx)("button",{onClick:()=>C("activos"),className:"px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ".concat("activos"===E?"bg-green-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"Activos"}),(0,r.jsx)("button",{onClick:()=>C("desactivados"),className:"px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ".concat("desactivados"===E?"bg-red-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"Desactivados"})]}),(y||"all"!==E)&&(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Mostrando ",q.length," de ",e.length," alumnos"]})]}),m&&(0,r.jsxs)("div",{className:"bg-white p-4 sm:p-6 rounded-lg shadow-md mb-4 sm:mb-6",children:[(0,r.jsx)("h2",{className:"text-xl sm:text-2xl font-semibold mb-4 text-gray-900",children:b?"Editar Alumno":"Nuevo Alumno"}),(0,r.jsxs)("form",{onSubmit:L,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre *"}),(0,r.jsx)("input",{type:"text",value:k.nombre,onChange:e=>_({...k,nombre:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-gray-900 placeholder:text-gray-500",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Apellido *"}),(0,r.jsx)("input",{type:"text",value:k.apellido,onChange:e=>_({...k,apellido:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-gray-900 placeholder:text-gray-500",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tel\xe9fono *"}),(0,r.jsx)("input",{type:"tel",value:k.telefono,onChange:e=>_({...k,telefono:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-gray-900 placeholder:text-gray-500",required:!0,placeholder:"Ej: +54 11 1234-5678"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de Alta"}),(0,r.jsx)("input",{type:"date",value:k.fecha_alta,onChange:e=>_({...k,fecha_alta:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-gray-900 placeholder:text-gray-500",required:!0})]})]}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2",children:[(0,r.jsx)("button",{type:"submit",className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 text-sm sm:text-base w-full sm:w-auto",children:"Guardar"}),(0,r.jsx)("button",{type:"button",onClick:()=>{u(!1),f(null)},className:"bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 text-sm sm:text-base w-full sm:w-auto",children:"Cancelar"})]})]})]}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:(0,r.jsx)(l.A,{className:"mx-0",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-4 sm:px-6 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Nombre"}),(0,r.jsx)("th",{className:"px-4 sm:px-6 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Apellido"}),(0,r.jsx)("th",{className:"px-4 sm:px-6 py-2 text-left text-xs font-medium text-gray-500 uppercase hidden md:table-cell",children:"Tel\xe9fono"}),(0,r.jsx)("th",{className:"px-4 sm:px-6 py-2 text-left text-xs font-medium text-gray-500 uppercase hidden lg:table-cell",children:"Clases Inscritas"}),(0,r.jsx)("th",{className:"px-4 sm:px-6 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Estado"}),(0,r.jsx)("th",{className:"px-4 sm:px-6 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Acciones"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:J.map(e=>{let t=P(e.id);return(0,r.jsxs)("tr",{className:e.activo?"":"opacity-60",children:[(0,r.jsx)("td",{className:"px-4 sm:px-6 py-2 whitespace-nowrap text-sm text-gray-900",children:e.nombre}),(0,r.jsx)("td",{className:"px-4 sm:px-6 py-2 whitespace-nowrap text-sm text-gray-900",children:e.apellido}),(0,r.jsx)("td",{className:"px-4 sm:px-6 py-2 whitespace-nowrap text-sm text-gray-900 hidden md:table-cell",children:e.telefono||"-"}),(0,r.jsx)("td",{className:"px-4 sm:px-6 py-2 text-sm text-gray-900 hidden lg:table-cell",children:(0,r.jsx)("div",{className:"max-w-xs truncate",title:t,children:t})}),(0,r.jsx)("td",{className:"px-4 sm:px-6 py-2 whitespace-nowrap text-sm",children:(0,r.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(e.activo?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.activo?"Activo":"Desactivado"})}),(0,r.jsx)("td",{className:"px-4 sm:px-6 py-2 whitespace-nowrap text-sm font-medium",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-0",children:[(0,r.jsx)("button",{onClick:()=>{g(e),p(!0)},disabled:!e.activo,className:"px-3 py-2 sm:px-0 sm:py-0 rounded-md sm:rounded-none text-sm font-medium transition-colors sm:mr-3 ".concat(e.activo?"bg-blue-50 sm:bg-transparent text-blue-600 hover:text-blue-900 hover:bg-blue-100 sm:hover:bg-transparent":"bg-gray-100 sm:bg-transparent text-gray-400 cursor-not-allowed opacity-50"),title:e.activo?"Ver y gestionar reservas de clases":"No disponible para alumnos desactivados",children:"Reservas"}),(0,r.jsx)("button",{onClick:()=>{f(e),_({id:e.id,nombre:e.nombre,apellido:e.apellido,telefono:e.telefono,fecha_alta:e.fecha_alta}),u(!0)},disabled:!e.activo,className:"px-3 py-2 sm:px-0 sm:py-0 rounded-md sm:rounded-none text-sm font-medium transition-colors sm:mr-3 ".concat(e.activo?"bg-purple-50 sm:bg-transparent text-purple-600 hover:text-purple-900 hover:bg-purple-100 sm:hover:bg-transparent":"bg-gray-100 sm:bg-transparent text-gray-400 cursor-not-allowed opacity-50"),title:e.activo?"Editar alumno":"No disponible para alumnos desactivados",children:"Editar"}),(0,r.jsx)("button",{onClick:()=>O(e.id),disabled:!e.activo,className:"px-3 py-2 sm:px-0 sm:py-0 rounded-md sm:rounded-none text-sm font-medium transition-colors sm:mr-3 ".concat(e.activo?"bg-red-50 sm:bg-transparent text-red-600 hover:text-red-900 hover:bg-red-100 sm:hover:bg-transparent":"bg-gray-100 sm:bg-transparent text-gray-400 cursor-not-allowed opacity-50"),title:e.activo?"Eliminar alumno":"No disponible para alumnos desactivados",children:"Eliminar"}),(0,r.jsx)("button",{onClick:()=>D(e),className:"px-3 py-2 sm:px-0 sm:py-0 rounded-md sm:rounded-none text-sm font-medium transition-colors ".concat(e.activo?"bg-orange-50 sm:bg-transparent text-orange-600 hover:text-orange-900 hover:bg-orange-100 sm:hover:bg-transparent":"bg-green-50 sm:bg-transparent text-green-600 hover:text-green-900 hover:bg-green-100 sm:hover:bg-transparent"),title:e.activo?"Desactivar alumno":"Activar alumno",style:{opacity:1},children:e.activo?"Desactivar":"Activar"})]})})]},e.id)})})]})})}),I>1&&(0,r.jsxs)("div",{className:"bg-white px-4 py-3 border-t border-gray-200 flex flex-col sm:flex-row items-center justify-between gap-4",children:[(0,r.jsxs)("div",{className:"text-sm text-gray-700",children:["Mostrando ",z+1," a ",Math.min(U,q.length)," de ",q.length," alumnos"]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("button",{onClick:()=>j(e=>Math.max(1,e-1)),disabled:1===w,className:"px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Anterior"}),(0,r.jsx)("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,I)},(e,t)=>{let a;return a=I<=5||w<=3?t+1:w>=I-2?I-4+t:w-2+t,(0,r.jsx)("button",{onClick:()=>j(a),className:"px-3 py-2 text-sm font-medium rounded-lg ".concat(w===a?"bg-purple-600 text-white":"text-gray-700 bg-white border border-gray-300 hover:bg-gray-50"),children:a},a)})}),(0,r.jsx)("button",{onClick:()=>j(e=>Math.min(I,e+1)),disabled:w===I,className:"px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Siguiente"})]})]}),x&&h&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2 sm:p-4",onClick:()=>{p(!1),g(null)},children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[95vh] flex flex-col",onClick:e=>e.stopPropagation(),children:[(0,r.jsx)("div",{className:"p-4 sm:p-6 flex-shrink-0 border-b border-gray-200",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("h2",{className:"text-lg sm:text-xl lg:text-2xl font-semibold pr-2",children:["Reservas de ",h.nombre," ",h.apellido]}),(0,r.jsx)("button",{onClick:()=>{p(!1),g(null)},className:"text-gray-500 hover:text-gray-700 text-xl sm:text-2xl flex-shrink-0",children:"✕"})]})}),(0,r.jsx)("div",{className:"overflow-y-auto flex-1 p-4 sm:p-6",children:(0,r.jsx)("div",{className:"space-y-2",children:a.map(e=>{let t=c.some(t=>t.usuario_id===h.id&&t.clase_id===e.id);return(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-0 p-3 rounded-lg border-2 ".concat(t?"bg-green-50 border-green-300":"bg-gray-50 border-gray-200"),children:[(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("span",{className:"font-medium",children:M(e.dia)}),(0,r.jsx)("span",{className:"ml-2 text-gray-600",children:e.hora}),(0,r.jsxs)("span",{className:"ml-2 text-sm text-gray-500",children:["- ",e.nombre]})]}),(0,r.jsx)("button",{onClick:()=>R(e.id),className:"px-3 sm:px-4 py-2 rounded-lg text-xs sm:text-sm font-medium whitespace-nowrap ".concat(t?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200"),children:t?"Desinscribir":"Inscribir"})]},e.id)})})}),(0,r.jsx)("div",{className:"p-4 sm:p-6 flex-shrink-0 border-t border-gray-200",children:(0,r.jsx)("button",{onClick:()=>{p(!1),g(null)},className:"w-full bg-purple-600 text-white px-4 py-3 rounded-lg hover:bg-purple-700 transition-colors font-medium text-base",children:"Cerrar"})})]})})]})]})}}},e=>{e.O(0,[244,441,964,358],()=>e(e.s=5538)),_N_E=e.O()}]);